{% extends '::base.html.twig' %}

{% block body %}
    <h1>Welcome to our online meditation page!</h1>

    <p>
        The meditation we practice is based on the teachings found in this booklet.<br>
        Please let us know you are here by submitting your intended time spent walking and sitting.<br>
        We normally do walking first, then sitting.<br>
    </p>

    <h2>Meditation Times</h2>

    <h4>Total minutes of meditation per hour (UTC) of day (past month):</h4>

    <div class="well">
        <canvas id="meditationHours" width="1024" height="400"></canvas>
    </div>


    <h2>Meditator Shoutbox</h2>

    <div class="shoutbox">
        <div class="messages">

        </div>

        {% if app.user %}
            <form action="" method="post" id="chatForm">

                <input type="text" required id="messageField" class="form-control" name="message[text]" placeholder="Your message">
                <input type="hidden" name="message[token]" value="{{ postMessageToken }}">
                <button type="submit" class="btn btn-default">Send</button>
            </form>
        {% else %}
            <form><p>Please log in to send a message.</p></form>
        {% endif %}
    </div>

    <p></p>

    <h2>Meditator List</h2>

    <div class="sessions">

    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Submit meditation information</h3>
        </div>
        <div class="panel-body session-panel">
            {% if app.user %}
                <form action="" method="post" id="sessionForm">

                    <input type="text" class="form-control" name="session[sitting]" placeholder="Sit (min)">
                    <input type="text" class="form-control" name="session[walking]" placeholder="Walk (min)">
                    <input type="hidden" name="session[token]" value="{{ postSessionToken }}">
                    <button type="submit" class="btn btn-default">Send</button>
                </form>
            {% else %}
                <form><p>Please log in to submit meditation information.</p></form>
            {% endif %}
        </div>
    </div>

    <div class="well">
        <strong>Share page</strong>
    </div>
{% endblock %}

{% block javascripts %}
<script>
    var renderChatPath     = '{{ path('render_chats') }}';
    var renderSessionsPath = '{{ path('render_sessions') }}';
    var postMessagePath    = '{{ path('post_message') }}';
    var postSessionPath    = '{{ path('post_session') }}';
    var meditationHours = {{ meditationHours|json_encode() }};
</script>
{% javascripts output='js/compiled/*.min.v1.js'
    '@SirimangaloMeditationBundle/Resources/views/Default/index.js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock %}
